<!doctype html>
<!--
  Material Design Lite
  Copyright 2015 Google Inc. All rights reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      https://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License
-->
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="A front-end template that helps you build fast, modern mobile web apps.">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <title>Material Design Lite</title>

  <!-- Add to homescreen for Chrome on Android -->
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="icon" sizes="192x192" href="images/android-desktop.png">

  <!-- Add to homescreen for Safari on iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Material Design Lite">
  <link rel="apple-touch-icon-precomposed" href="images/ios-desktop.png">

  <!-- Tile icon for Win8 (144x144 + tile color) -->
  <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">
  <meta name="msapplication-TileColor" content="#3372DF">

  <link rel="shortcut icon" href="images/favicon.png">

  <!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
  <!--
    <link rel="canonical" href="http://www.example.com/">
    -->

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.cyan-light_blue.min.css">
  <link rel="stylesheet" href="styles.css">
  <style>
    #view-source {
      position: fixed;
      display: block;
      right: 0;
      bottom: 0;
      margin-right: 40px;
      margin-bottom: 40px;
      z-index: 900;
    }
  </style>
</head>

<body>
  <div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
    <header class="demo-header mdl-layout__header mdl-color--grey-100 mdl-color-text--grey-600">
      <div class="mdl-layout__header-row">
        <span class="mdl-layout-title">SEDguridad</span>
        <div class="mdl-layout-spacer"></div>
      </div>
    </header>
    <div class="demo-drawer mdl-layout__drawer mdl-color--blue-grey-900 mdl-color-text--blue-grey-50">
      <nav class="demo-navigation mdl-navigation mdl-color--blue-grey-800">
        <a class="mdl-navigation__link navbott" href="#" style="cursor:pointer" data-valor="home"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">home</i>Inicio</a>
        <a class="mdl-navigation__link navbott" href="#" style="cursor:pointer" data-valor="movimientos"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">perm_scan_wifi</i>Movimientos</a>
        <div class="mdl-layout-spacer"></div>
        <a class="mdl-navigation__link navbott" href="#" style="cursor:pointer" data-valor="configuracion"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">settings</i>Configuración</a>
      </nav>
    </div>
    <main class="mdl-layout__content">
      <!-- TAB HOME -->
      <div class="mdl-grid demo-content" id="home">

        <div class="demo-cards mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-grid mdl-grid--no-spacing">

          <div class="titleColor demo-options mdl-card mdl-color--grey-500 mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-desktop"
            style="min-height:auto;">
            <div class="mdl-card__actions mdl-card--border">
              <a href="#" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-color-text--blue-grey-50" data-upgraded=",MaterialButton,MaterialRipple">
                Estado actual : <span class="estado_alarma_text">Sin Conexión</span> <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></a>
            </div>
          </div>

        </div>

        <div class="demo-options mdl-card mdl-color--blue-500 mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-desktop">
          <div class="mdl-card__supporting-text mdl-color-text--blue-grey-50">
            <h4>Bienvenido</h4> Al sistema de seguridad configurable SEDguridad. Sistema de vigilancia
            </br>
            </br>
            Puede revisar los ultimos movimientos y alarmas de los diferentes sensores presionando el siguiente boton.
          </div>

          <div class="mdl-card__actions mdl-card--border mdl-color--blue-500">
            <a href="#" class="navbott mdl-button mdl-js-button mdl-js-ripple-effect mdl-color-text--blue-grey-50" data-valor="movimientos">Ultimos Movimientos</a>
            <div class="mdl-layout-spacer"></div>
            <i class="material-icons">perm_scan_wifi</i>
          </div>
        </div>

      </div>
      <!-- TAB MOVIMIENTOS -->
      <div class="mdl-grid demo-content" id="movimientos" style="display:none">

        <div class="demo-cards mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-grid mdl-grid--no-spacing">

          <div class="titleColor demo-options mdl-card mdl-color--grey-500 mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-desktop"
            style="min-height:auto;">
            <div class="mdl-card__actions mdl-card--border">
              <a href="#" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-color-text--blue-grey-50" data-upgraded=",MaterialButton,MaterialRipple">
                Estado actual : <span class="estado_alarma_text">Sin Conexión</span> <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></a>
            </div>
          </div>

        </div>

        <div class="demo-cards mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-grid mdl-grid--no-spacing" style="display:none">
          <div id="template_clonar" class="demo-updates mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-desktop">
            <div class="mdl-card__media mdl-color--red-300">
              <img class="article-image" src="https://upload.wikimedia.org/wikipedia/en/6/63/Outsiders_inn-320x240.jpg" border="0" alt=""
                style="width:100%">
            </div>
            <div class="mdl-card__supporting-text mdl-color-text--grey-600 ">
              Sensor: <span class="sensor_nombre"></span></br>
              <span class="sensor_info"></span>
            </div>
          </div>
          <div class="demo-separator mdl-cell--1-col"></div>
        </div>

        <div id="contenido_movimientos" class="demo-cards mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-grid mdl-grid--no-spacing">
        </div>

        <div id="contenido_movimientos2" class="demo-cards mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-grid mdl-grid--no-spacing">
        </div>

      </div>

      <!-- TAB CONFIGURACION -->
      <div class="mdl-grid demo-content" id="configuracion" style="display:none">

        <div class="demo-cards mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-grid mdl-grid--no-spacing">

          <div class="titleColor demo-options mdl-card mdl-color--grey-500 mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-desktop"
            style="min-height:auto;">
            <div class="mdl-card__actions mdl-card--border">
              <a href="#" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-color-text--blue-grey-50" data-upgraded=",MaterialButton,MaterialRipple">
                Estado actual : <span class="estado_alarma_text">Sin Conexión</span> <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></a>
            </div>
          </div>

        </div>

        <div class="demo-options mdl-card mdl-color--blue-500 mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--4-col-tablet mdl-cell--12-col-desktop">
          <div class="mdl-card__supporting-text mdl-color-text--blue-grey-50">
            <h4>Opciones</h4> Puede configurar el estado de su alarma cuando uds lo desee, simplemente pulse sobre el estado deseado.
          </div>
          <div class="mdl-card__actions mdl-card--border mdl-color--grey-500">
            <a href="#" data-state="Inactiva" class="cambiarestado mdl-button mdl-js-button mdl-js-ripple-effect mdl-color-text--blue-grey-50">Inactiva</a>
            <div class="mdl-layout-spacer"></div>
            <i class="material-icons">lock_open</i>
          </div>
          <div class="mdl-card__actions mdl-card--border mdl-color--blue-200">
            <a href="#" data-state="Preactiva" class="cambiarestado mdl-button mdl-js-button mdl-js-ripple-effect mdl-color-text--blue-grey-50">Preactiva</a>
            <div class="mdl-layout-spacer"></div>
            <i class="material-icons">restore</i>
          </div>
          <div class="mdl-card__actions mdl-card--border  mdl-color--green-500">
            <a href="#" data-state="Activa" class="cambiarestado mdl-button mdl-js-button mdl-js-ripple-effect mdl-color-text--blue-grey-50">Activa</a>
            <div class="mdl-layout-spacer"></div>
            <i class="material-icons">lock</i>
          </div>
          <div class="mdl-card__actions mdl-card--border mdl-color--red-500">
            <a href="#" data-state="Sonando" class="cambiarestado mdl-button mdl-js-button mdl-js-ripple-effect mdl-color-text--blue-grey-50">Sonando</a>
            <div class="mdl-layout-spacer"></div>
            <i class="material-icons">warning</i>
          </div>
        </div>


        <div class="demo-options mdl-card mdl-color--blue-500 mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--4-col-tablet mdl-cell--12-col-desktop">
          <div class="mdl-card__supporting-text mdl-color-text--blue-grey-50">
            <h4>Cambio de contraseña</h4> Puede cambiar la contraseña de su dispositivo cuando lo desee
          </div>
          <div class="mdl-card__actions mdl-card--border mdl-color--blue-50">
            <input id="pass" class="mdl-textfield__input" type="text">
            <a href="#" class="passwordchange mdl-button mdl-js-button mdl-js-ripple-effect mdl-color-text--blue-grey-500">Cambiar</a>
            <div class="mdl-layout-spacer"></div>
          </div>
        </div>
      </div>
    </main>
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  <script src="https://code.getmdl.io/1.1.3/material.min.js"></script>
  <script>
    var url = "http://localhost:8080";
    $(function(){
       
      $(".navbott").on("click",function(){
        var data = $(this).data("valor");
        $(".demo-content").hide();
        $("#"+data).show();
     //   $(".mdl-layout__obfuscator").trigger("click");
      });
      
     $(".passwordchange").on("click",function(){
        $.get(url+"/cambiar/password/"+$("#pass").val());
        $("#pass").val("");
     });
     
     $(".cambiarestado").on("click",function(){
       var data = $(this).data("state");
       $.get(url +"/cambiar/estado/"+data);
     });
      //alert(data);
    });
    
   window.setInterval(actualizarEstado, 1000);
  
    function actualizarEstado(){
     
    $.getJSON(url+"/consultar/estado", function( data ) {
      $(".estado_alarma_text").text(data["estado"]);
      $(".titleColor").removeClass('mdl-color--grey-500');
      $(".titleColor").removeClass('mdl-color--blue-100');
      $(".titleColor").removeClass('mdl-color--green-500');
      $(".titleColor").removeClass('mdl-color--red-500');
      
      if(data["estado"] == "Activa"){
        $(".titleColor").addClass('mdl-color--green-500');
      }else if(data["estado"] == "Inactiva"){
        $(".titleColor").addClass('mdl-color--grey-500');
      }else if(data["estado"] == "Preactiva"){
        $(".titleColor").addClass('mdl-color--blue-100');
      }else if(data["estado"] == "Sonando"){
        $(".titleColor").addClass('mdl-color--red-500');
      }
    });
       
    $.getJSON(url+ "/consultar/historico", function( data ) {
      $("#contenido_movimientos").empty();
      $("#contenido_movimientos2").empty();
      $.each(data,function(key,value){
        var elemento = $("#template_clonar").clone();
        elemento.removeAttr('id');
        elemento.show();
        elemento.find(".sensor_nombre").first().text(value.nombre);
        elemento.find(".sensor_info").first().text("Movimiento el "+ value.fecha)
        //elemento.find(".article-image").first().attr("src", value.imagen);
        if(key % 2 == 0){
          $("#contenido_movimientos").append(elemento);
        }else{
         $("#contenido_movimientos2").append(elemento);
        }
        elemento.after('<div class="demo-separator mdl-cell--1-col"></div>');
      });
    }); 
   }
  </script>
</body>

</html>